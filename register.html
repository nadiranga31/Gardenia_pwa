<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
    <title>Gardenia Restaurant</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    <meta name="theme-color" content="#317EFB"/>
    <link rel="manifest" href="manifest.json">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/register-service-worker.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css'><link rel="stylesheet" href="css/login.css">

</head>
<body>
<!-- partial:index.partial.html -->
<nav class="main-nav">
	<ul>
		<li><a class="signin" href="#0">Login</a></li>
		<li><a class="signup" href="#0">Register</a></li>
	</ul>
</nav>

<div class="user-modal">
		<div class="user-modal-container">
			<ul class="switcher">
				<li><a href="#0">Login</a></li>
				<li><a href="#0">Register account</a></li>
        
			</ul>

			<div id="login">
				<form class="form">
					<p class="fieldset">
						<label class="image-replace email" for="signin-email">E-mail</label>
						<input class="full-width has-padding has-border" id="signin-email" type="email" placeholder="E-mail">
						<span class="error-message">An account with this email address does not exist!</span>
					</p>

					<p class="fieldset">
						<label class="image-replace password" for="signin-password">Password</label>
						<input class="full-width has-padding has-border" id="signin-password" type="password"  placeholder="Password">
						<a href="#0" class="hide-password">Show</a>
						<span class="error-message">Wrong password! Try again.</span>
					</p>

					<p class="fieldset">
						<input type="checkbox" id="remember-me" checked>
						<label for="remember-me">Remember me</label>
					</p>

					<p class="fieldset">
						<input class="full-width" type="submit" value="Login"  id='Login'>
					</p>

          <div class="container">
           
            <div class="back-button">
              <a href="index.html">Back to Home</a>
          </div>
        </div>

				</form>
				
				<p class="form-bottom-message"><a href="#0">Forgot your password?</a></p>
				<!-- <a href="#0" class="close-form">Close</a> -->
			</div>

			<div id="signup">
				<form class="form">
					<p class="fieldset">
						<label class="image-replace username" for="signup-username">Username</label>
						<input class="full-width has-padding has-border" id="signup-username" type="text" placeholder="Username">
						<span class="error-message">Your username can only contain numeric and alphabetic symbols!</span>
					</p>

					<p class="fieldset">
						<label class="image-replace email" for="signup-email">E-mail</label>
						<input class="full-width has-padding has-border" id="signup-email" type="email" placeholder="E-mail">
						<span class="error-message">Enter a valid email address!</span>
					</p>

					<p class="fieldset">
						<label class="image-replace password" for="signup-password">Password</label>
						<input class="full-width has-padding has-border" id="signup-password" type="password"  placeholder="Password">
						<a href="#0" class="hide-password">Show</a>
						<span class="error-message">Your password has to be at least 6 characters long!</span>
					</p>

					<p class="fieldset">
						<input type="checkbox" id="accept-terms">
						<label for="accept-terms">I agree to the <a class="accept-terms" href="#0">Terms</a>& Conditions</label>
					</p>

					<p class="fieldset">
						<input class="full-width has-padding" type="submit" id='createAccount' value="Create account">
            
					</p>

          <div class="container">
           
            <div class="back-button">
              <a href="index.html">Back to Home</a>
          </div>
        </div>
					
            
					
				</form>

				<!-- <a href="#0" class="cd-close-form">Close</a> -->
			</div>

			<div id="reset-password">
				<p class="form-message">Lost your password? Please enter your email address.</br> You will receive a link to create a new password.</p>

				<form class="form">
					<p class="fieldset">
						<label class="image-replace email" for="reset-email">E-mail</label>
						<input class="full-width has-padding has-border" id="reset-email" type="email" placeholder="E-mail">
						<span class="error-message">An account with this email does not exist!</span>
					</p>

					<p class="fieldset">
						<input class="full-width has-padding" type="submit" value="Reset password">
					</p>
				</form>

				<p class="form-bottom-message"><a href="#0">Back to log-in</a></p>
			</div>
			<a href="#0" class="close-form">Close</a>
		</div>
    
	</div>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
        import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-database.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-analytics.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, GoogleAuthProvider, signInWithRedirect, getRedirectResult, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyDWpFtYvSHCdbk6exArZUzT0HDiTdGlVDM",
          authDomain: "gardenia-c3f64.firebaseapp.com",
          projectId: "gardenia-c3f64",
          storageBucket: "gardenia-c3f64.appspot.com",
          messagingSenderId: "187788474716",
          appId: "1:187788474716:web:626f5a3002aa672e61e999"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();
        
        createAccount.addEventListener('click',(e)=>{

          var email = document.getElementById('signup-email').value;
          var password = document.getElementById('signup-password').value;
          var username = document.getElementById('signup-username').value;

          createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
              // Signed in 
              const user = userCredential.user;
              set(ref(database, 'users/' + user.uid),{
                username: username,
                email: email
              })
              localStorage.setItem('userEmail', email);
              window.location.href = 'index.html';
              // ...
            })
            .catch((error) => {
              const errorCode = error.code;
              const errorMessage = error.message;
              // ..
              alert('errorMessage');
            });

        });
        Login.addEventListener('click',(e)=>{
          var email = document.getElementById('signin-email').value;
          var password = document.getElementById('signin-password').value;

          signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
              // Signed in 
              const dt = new Date();
              const user = userCredential.user;
              update(ref(database, 'users/' + user.uid),{
                last_login: dt,
              })
              localStorage.setItem('userEmail', email);
              window.location.href = 'index.html';
              // ...
            })
            .catch((error) => {
              const errorCode = error.code;
              const errorMessage = error.message;
              alert('errorMessage');
            });
        });

        const user = auth.currentUser;
        onAuthStateChanged(auth, (user) => {
          if (user) {
            // User is signed in, see docs for a list of available properties
            // https://firebase.google.com/docs/reference/js/auth.user
            const uid = user.uid;
            // ...
          } else {
            // User is signed out
            // ...
          }

          
});
      
        // Event listener for Google Sign-In
        
        document.getElementById("socialLoginGoogle").addEventListener('click', (e) => {
    signInWithPopup(auth, provider)
        .then((result) => {
            // This gives you a Google Access Token. You can use it to access the Google API.
            const credential = GoogleAuthProvider.credentialFromResult(result);
            const token = credential.accessToken;
            // The signed-in user info.
            const user = result.user;
            // IdP data available using getAdditionalUserInfo(result)
            const email = user.email;
            // Save the user's email to local storage
            localStorage.setItem('userEmail', email);
            window.location.href = 'index.html';
        })
        .catch((error) => {
            // Handle Errors here.
            if (error.code === "auth/cancelled-popup-request") {
                // The user canceled the pop-up request, you can ignore or handle it accordingly.
                console.log("Google Sign-In Pop-up request was canceled.");
            } else {
                // Handle other errors
                const errorCode = error.code;
                const errorMessage = error.message;
                // The email of the user's account used.
                const email = error.customData ? error.customData.email : null;
                // The AuthCredential type that was used.
                const credential = GoogleAuthProvider.credentialFromError(error);

                // Display or log the error message
                console.error("Google Sign-In Error:", errorCode, errorMessage);

                // You can also display the error message to the user
                alert("Google Sign-In Error: " + errorMessage);
            }
        });
});

    
        // Event listener for Google Sign-In
        document.getElementById("socialSigninGoogle").addEventListener('click', (e) => {
    signInWithPopup(auth, provider)
        .then((result) => {
            // This gives you a Google Access Token. You can use it to access the Google API.
            const credential = GoogleAuthProvider.credentialFromResult(result);
            const token = credential.accessToken;
            // The signed-in user info.
            const user = result.user;
            // IdP data available using getAdditionalUserInfo(result)
            const email = user.email;
            // Save the user's email to local storage
            localStorage.setItem('userEmail', email);
            window.location.href = 'index.html';
        })
        .catch((error) => {
            // Handle Errors here.
            if (error.code === "auth/cancelled-popup-request") {
                // The user canceled the pop-up request, you can ignore or handle it accordingly.
                console.log("Google Sign-In Pop-up request was canceled.");
            } else {
                // Handle other errors
                const errorCode = error.code;
                const errorMessage = error.message;
                // The email of the user's account used.
                const email = error.customData ? error.customData.email : null;
                // The AuthCredential type that was used.
                const credential = GoogleAuthProvider.credentialFromError(error);

                // Display or log the error message
                console.error("Google Sign-In Error:", errorCode, errorMessage);

                // You can also display the error message to the user
                alert("Google Sign-In Error: " + errorMessage);
            }
        });
});
   
       
      //  });
      </script>
      <script>
        window.addEventListener('load', () => {
    if (!navigator.onLine) {
        window.location.href = 'offline.html';
    }
    });
    </script>
      
  
  <!-- JavaScript Libraries -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="lib/wow/wow.min.js"></script>
  <script src="lib/easing/easing.min.js"></script>
  <script src="lib/waypoints/waypoints.min.js"></script>
  <script src="lib/owlcarousel/owl.carousel.min.js"></script>
  
  <!-- Your custom scripts -->
  <script src="js/script.js"></script>
  
  <script src="js/main.js"></script>
  <script src="sw.js"></script>
  </body>
  </html>

  
  
  
  
  